<section>
  <h2>Games</h2>
  <p><a routerLink="/create">Create New Game</a></p>

  <section class="search">
    <input placeholder="Search title or description" [(ngModel)]="searchTextValue" />
    <select [(ngModel)]="searchGenreValue">
      <option [ngValue]="null">All Genres</option>
      <option *ngFor="let genre of filters()?.genres" [value]="genre">{{ genre }}</option>
    </select>
    <select [(ngModel)]="searchPublisherValue">
      <option [ngValue]="null">All Publishers</option>
      <option *ngFor="let publisher of filters()?.publishers" [value]="publisher">{{ publisher }}</option>
    </select>
    <button (click)="doSearch()">Search</button>
    <button (click)="clearSearch()">Clear</button>
  </section>

  <p *ngIf="!games()">Loading...</p>

  <table *ngIf="games()">
    <thead>
      <tr>
        <th>Title</th>
        <th>Genre</th>
        <th>Publisher</th>
        <th>Year</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let game of games()">
        <td><a [routerLink]="['/', game.id]">{{ game.title }}</a></td>
        <td>{{ game.genre }}</td>
        <td>{{ game.publisher }}</td>
        <td>{{ game.year }}</td>
        <td><button (click)="goToEdit(game.id)">Edit</button></td>
      </tr>
    </tbody>
  </table>

  <section *ngIf="selected()">
    <h3>Selected</h3>
    <div><strong>{{ selected()?.title }}</strong></div>
    <div>{{ selected()?.description }}</div>
    <div>Genre: {{ selected()?.genre }}</div>
    <div>Publisher: {{ selected()?.publisher ?? '' }}</div>
    <div>Year: {{ selected()?.year ?? 0 }}</div>
    <div>Price: {{ selected()?.price ?? '' }}</div>
  </section>
</section>
